<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        circle {
            /*            stroke-dasharray: 100;*/
            /*            stroke-dashoffset: 0;*/
            ;
        }

    </style>
</head>

<body>

    <svg viewBox="0 0 100 100" width="100" height="100" xmlns="http://www.w3.org/2000/svg">



    </svg>


    <!--
    <svg viewBox="0 0 100 100" width="100" height="100" xmlns="http://www.w3.org/2000/svg">
    <circle  cx="50" cy="50" r="20" fill="none" stroke="blue"    stroke-width="40"/>
    <circle  cx="50" cy="50" r="10" fill="none" stroke="red"    stroke-width="40"/>
    <svg>
-->

    <script>
        "use strict";
        //        let totalLength = document.querySelector("circle").getTotalLength();

        let allVal = 0;
        let addUp = 0;
        let circle_arr = [];
        let arrayOfPiePieces = [{
            val: 200,
            color: "red"
        }, {
            val: 100,
            color: "yellow"
        }, {
            val: 100,
            color: "green"
        }];

//        arrayOfPiePieces.reverse();



        //Then the computed dashoffset will be:
        //dashoffset = (totallength / 100) * percentage

        document.addEventListener("DOMContentLoaded", startScript);

        function startScript() {
            arrayOfPiePieces.forEach(each => {
                console.log(each.color)
                allVal += each.val;
            })
            console.log("allVal", allVal);

            arrayOfPiePieces.forEach((each, index) => {
                let circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                circle.setAttribute( 'cx', 50);

                circle.setAttribute( 'cy', 50);
                circle.setAttribute( 'r', 20 /*-(index*2)*/);

                circle.style.fill = "none";
                circle.style.strokeWidth = 40;
                circle.style.stroke = each.color;

                //document.querySelector("svg").appendChild(circle);
                console.log(circle.getTotalLength());
                let totalLength = 2*20*Math.PI;
                circle.style.strokeDasharray  = totalLength ;
                circle.style.strokeDashoffset =  totalLength-(addUp +totalLength * each.val /allVal);
                addUp +=   (totalLength * each.val /allVal);
                circle_arr.unshift(circle);


            })
            console.log(circle_arr);
            circle_arr.forEach(each => {

                document.querySelector("svg").appendChild(each);

            });
//            document.querySelector("#part0").style.strokeDasharray = totalLength;
//            document.querySelector("#part1").style.strokeDasharray = totalLength;
//            document.querySelector("#part0").style.strokeDashoffset = totalLength - totalLength / 100 * percentage_0;
//            document.querySelector("#part1").style.strokeDashoffset = totalLength - totalLength / 100 * (percentage_0 + percentage_1);

            //            document.querySelector("#part1")

        }

    </script>
</body>

</html>
